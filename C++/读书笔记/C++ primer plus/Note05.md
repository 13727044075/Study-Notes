##第7章 函数——C++的编程模块
###1. 函数的基本知识
* C++对于返回值的类型有一定的限制:不能是数组，但可以是其他任何类型——整数、浮点数、指针，甚至可以是结构和对象
* 函数在执行返回语句后结束
* 原型描述了函数到编译器的接口，也就是说，它将函数返回值的类型以及参数的类型和数量告诉编译器
* 函数原型不要求提供变量名，有类型列表就可以了

###2. 函数参数和按值传递
* C++通常按值传递参数，
* C++标准使用参数来表示实参，使用参量来表示形参，参数传递是将参量赋给参数，
* 形参是用于接收传递值的变量，也就是在函数原型中参数的变量名，而实参是实际传递给参数的值。

###3. 函数和数组
* 传递数组给函数的函数定义写法如`int sum_arr(int arr[], int n);`,这里可以使用`int * arr`代替`int arr[]`，这是因为在C++，当且仅当用于函数头或函数原型中，int* arr 和 int arr[]的含义才是相同的。它们都意味着arr是一个int指针。

* 传递常规变量时，函数将使用变量的拷贝；但传递数组时，传递的是数组的地址，所以函数将使用原来的数组。
* 为了确保函数不会修改原始数组，可以使用关键字const来声明形参，这样可以防止函数无意中修改数组的内容
* 使用数组区间的函数，也就是给函数指定元素区间，可以通过传递两个指针来完成：一个指针标识数组的开头，另一个标识数组的尾部

代码如下：
    
    int sum_arr(const int * begin, const int * end){
        const int* pt;
        int total = 0;
        for (pt = begin; pt != end; pt++){
            total = total + *pt;
        }
        return total;
    }

**指针和常量**

对于指针，有两种使用const的方式：

* 声明一个指向常量的指针pt:`const int * pt;`,这里的pt是指向const int，因此\*pt是一个常量，不可以修改；
* C++禁止将const的地址赋给非const指针
* 对于将指针指向指针，如果涉及的是一级间接关系，则将非const指针赋给const指针是可以的

* 第二种就是如`int * const pt;`,这种方法是无法修改指针的值，即不能修改pt指向的地址，也就是变量，但是可以修改这个指向的变量的值

###4. 函数和二维数组
将二维数组作为参数的函数，其原型如下：

    int sum(int (*arr)[4], int size);
这里可以将第一个参数替换成`int arr[][4]`,这里指出了arr是指针，指向由4个int组成的数组，这里指针类型指定了列数。而该函数的第二个参数size则是指定了数组的行数。

###5. 函数和C-风格字符串
表示字符串的方式有三种：
    
  * char数组；
  * 用引号括起的字符串常量(也称字符串字面值)
  * 被设置为字符串的地址的char指针。

上述三种类型都是char指针(准确说是char*),因此可以将其作为字符串处理的参数。由于C-风格字符串是有内置的结束字符，因此不需要将字符串长度作为参数传递给参数，函数可以循环依次检查字符串中的每个字符，直到遇到结尾的空值字符为止。

###6. 函数和结构
对于结构作为函数参数，可以有三种传递方式，按值传递，使用指针传递地址，以及按引用传递(在第8章介绍)

* 结构比较小时，按值传递结构最合理。
* 传递地址，也就是使用指针作为形参，如`void show_polar(const polar * pda);`,这里使用const是因为函数是用于显示结构中的成员，不需要修改结构；同时在函数定义中，因为使用了指针，应用间接成员运算符(->),而不是成员运算符(.)。

###7. 函数和string、array对象
* 使用string做参数，如`void display(const string sa[]);`,这里传入的是一个string数组;
* 对于array作为参数，可以按值传递，也可以传递其地址

###8. 递归
C++函数有一种有趣的特点——可以调用自己(但与C语言不同的是，C++不允许main()调用自己)，这种功能被称为递归。

递归调用的代码例子如下：

    void recurs(argumentlist){
        statement1;
        if(test)
            recurs(argumentlist);
        statement2;
    }

###9. 函数指针
* 与数据相似，函数也有地址，函数的地址是存储器机器语言代码的内存的开始地址。
* 获取函数的地址只要使用函数名即可，如果think()是一个函数，则think就是该函数的地址，要将函数作为参数进行传递，必须传递函数名，如果使用think()作为另一个函数的参数，则是将think函数的返回值传递给这个函数。

要声明指向特定类型的函数的指针，可以首先编写这种函数的原型，然后用(\*pf)替换函数名，这样pf就是这类函数的指针。例子如下:

    // 声明一个函数
    double pam(int);
    // 声明函数指针
    double (*pf)(int);
    // 将函数的地址赋给函数指针,这里的函数必须是特征标和返回类型都必须和pf相同才可以赋值
    pf = pam;

使用函数指针可以将(\*pf)看作函数名来使用，如`double y = (*pf)(5);`，当然也可以写成`double y = pf(5);`,这两种格式都是使用指针来调用其指向的函数的。

